<?xml version="1.0" encoding="UTF-8"?>
<openerp>
    <data>

        
        
	<template id="assets_frontend" inherit_id="website.assets_frontend" name="website_blog_layout_options_assets" >
    	<xpath expr="/t" position="inside">
	        <link rel='stylesheet' href='/website_blog_layout_options/static/src/css/website_blog_layout_options.css'/>

            <!-- <script type="text/javascript" src="/website_blog_layout_options/static/src/js/website_blog_layout_options.js"/>  -->
    	</xpath>
	</template>
 

        <template id="blog_teaser" inherit_id="website_blog.blog_post_short" name="blogTeaser">
            <xpath expr="//h2[@t-field='blog_post.name']" position="after">
                <div class="row mb16">
                    <t t-if="blog_post.display_type == 'complete'"> 
                        <t t-if="not blog_post.thumbnail">
                            <div class="pull-right" />
                        </t>
                        <t t-if="blog_post.thumbnail">
                            <div  class="pull-right thumbnail"    
                                style = "margin: 0px 6px 0px 0px;"   
                                t-field="blog_post.thumbnail.datas" 
                                t-field-options = '{"widget": "image", "class" : "o_image_floating o_margin_s pull left", "max_width" : 64 }'
                                />
                        </t>
                        <div t-field="blog_post.content"/>
                    </t>
                    <t t-if="blog_post.display_type == 'teaser'">
                        <t t-if="blog_post.thumbnail">
                            <div  class="pull-right thumbnail"   
                                style = "margin: 0px 6px 0px 18px;"   
                                t-field="blog_post.thumbnail.datas" 
                                t-field-options = '{"widget": "image",  "max_width" : 64 }'
                                />
                        </t>
                        <t t-if="not blog_post.thumbnail">
                            <div class="pull-right">
                            </div>
                        </t>
                        <p t-esc="blog_post.teaser"/>
                            <a t-attf-href="/blog/#{ slug(blog_post.blog_id) }/post/#{ slug(blog_post)}">
                            </a>
                    </t>
                </div>
            </xpath>
            <xpath expr="//h4[@t-field='blog_post.subtitle']" position="replace">
                <span></span>
            </xpath>

            <xpath expr="//span[@t-field='blog_post.author_avatar']" position="replace">
                <span/>
            </xpath>
        </template>

        <template id="show_post_complete_layout_options" 
            inherit_id="website_blog.blog_post_complete">
            <xpath expr="//div[@id='blog_content']" position="before">
                <t t-if="blog_post.thumbnail">
                    <div class="pull-right"    
                        style = "margin: 0px 6px 0px 18px;"   
                        t-field="blog_post.thumbnail.datas" 
                        t-field-options = '{"widget": "image",  "max_width" : 256 }'
                        />
                </t>
            </xpath>

            <xpath expr="//div[contains(@class, 'js_fullheight')]" position="attributes">
                <attribute name="class" />
                <attribute name="t-attf-class">cover {{'js_smallheight' if blog_post.background_image_show == 'small_image' else 'js_fullheight' }}"  </attribute>
            </xpath>


        <xpath expr="//div[contains(@t-attf-class,'cover')]/div[@class='container']" position="replace">
            <t t-if="blog_post.background_image_show == 'small_image'">
                <div class="container">
                    <div class="container text-right mt16">
                        <div class="btn-group css_non_editable_mode_hidden">
                            <a id="change_cover_small" class="btn btn-primary">
                                Change Cover S
                            </a>
                            <a id="clear_cover_small" class="btn btn-danger">
                                <span class="fa fa-times"/>
                            </a>
                        </div>
                        <div class="cover-storage oe_hidden"></div>
                        <t t-call="website.publish_management">
                            <t t-set="object" t-value="blog_post"/>
                            <t t-set="publish_edit" t-value="True"/>
                            <li>
                                <form class="duplicate hidden" action="/blogpost/duplicate">
                                    <input name="blog_post_id" t-att-value="blog_post.id"/>
                                </form>
                                <a href="#" class="duplicate" onclick="$(this).prev('form').submit()">Duplicate</a>
                            </li>
                        </t>
                    </div>
                </div>
            </t>
            <t t-if="blog_post.background_image_show == 'big_image' or not blog_post.background_image_show">
                <div class="container">
                    <div class="container text-right mt16">
                        <div class="btn-group css_non_editable_mode_hidden">
                            <a id="change_cover" class="btn btn-primary">
                                Change Cover 
                            </a>
                            <a id="clear_cover" class="btn btn-danger">
                                <span class="fa fa-times"/>
                            </a>
                        </div>
                        <div class="cover-storage oe_hidden"></div>
                        <t t-call="website.publish_management">
                            <t t-set="object" t-value="blog_post"/>
                            <t t-set="publish_edit" t-value="True"/>
                            <li>
                                <form class="duplicate hidden" action="/blogpost/duplicate">
                                    <input name="blog_post_id" t-att-value="blog_post.id"/>
                                </form>
                                <a href="#" class="duplicate" onclick="$(this).prev('form').submit()">Duplicate</a>
                            </li>
                        </t>
                    </div>
                </div>
            </t>
            </xpath>
            <xpath expr="//div[contains(@class,'cover_footer')]"  position="attributes">
                <attribute name="class" />
                <attribute name="t-attf-class">cover_footer mb0 text-center {{'bottom_smallheight' if blog_post.background_image_show == 'small_image' else 'bottom_fullheight'}}"  </attribute>
            </xpath>

            <!-- reducing title elements for compact layout, explitly 
                 pointing XPath to leave footer the same -->
            <xpath expr="//div[@class='blog_title']" position="replace" >
                <div class='blog_title_small'>
                    <h1 t-field="blog_post.name" id="blog_post_name" t-att-data-blog-id="blog_post.id"/> 
                    <p class="post-meta text-muted text-center" name="blog_post_data"/>
                </div>
            </xpath>

        </template>

        <template id="blog_show_cat_title" 
            name="Blog category title show"
            inherit_id="website_blog.blog_post_short">
            <xpath expr="//h3[@t-field='blog.subtitle']" position="replace">
                <t t-if="current_category">
                    <h1>Posts for Category: <t t-esc="current_category.name" /> </h1>
                </t>
                <t t-if="not current_category">
                    <h3 t-field="blog.subtitle"/>
                </t>
            </xpath>
        </template>

        <template id="opt_blog_rc_categories" 
            name="Blog category list"
            active="False" 
            customize_show="True">
            <!-- give the element Id in order to identify it in the next xpath in a future-proof way -->
            <xpath expr="//div[@id='blog_right_column']" position="inside">
                <section class="mt32">
                    <h4>Categories  (<t t-esc="len(categories)"/> )</h4>
                    <ul class="nav nav-pills nav-stacked">
                        <t t-foreach="categories" t-as="nav_cat">
                            <li t-attf-style="display: list-item;">
                                <a t-attf-href="#{blog_url('',['blog', 'tag', 'cat'], blog=blog, tag=None, cat=nav_cat.id)}">
                                    <b><span t-field="nav_cat.name"/></b>
                                    <span class="pull-right badge" t-esc="len(nav_cat.post_ids)" /> posts 
                                </a>
                            </li>   
                        </t>
                    </ul>
                </section>
            </xpath>
        </template>

        <!-- Option:Right Column: bigger size -->
        <template id="opt_blog_varsize" name="Tags"
            inherit_id="website_blog.index_right" active="False" customize_show="True">
            <t t-if="larger_right_column">
                <xpath expr="//div[@id='main_column']" position="attributes">
                    <attribute name="class">col-sm-7</attribute>
                </xpath>
                <xpath expr="//div[@id='blog_right_column']" position="attributes">
                    <attribute name="class">col-lg-4 col-lg-offset-1 col-sm-5</attribute>
                </xpath>
            </t>
        </template>


    </data>
</openerp>
